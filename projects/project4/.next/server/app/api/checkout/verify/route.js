(()=>{var e={};e.id=470,e.ids=[470],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79646:e=>{"use strict";e.exports=require("child_process")},55511:e=>{"use strict";e.exports=require("crypto")},94735:e=>{"use strict";e.exports=require("events")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},28354:e=>{"use strict";e.exports=require("util")},28882:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>v,routeModule:()=>d,serverHooks:()=>_,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>m});var s={};t.r(s),t.d(s,{GET:()=>u});var i=t(42706),o=t(28203),a=t(45994),c=t(39187),n=t(98481),p=t(2864);async function u(e){try{let{searchParams:r}=new URL(e.url),t=r.get("session_id");if(!t)return c.NextResponse.json({error:"Session ID is required"},{status:400});if(!(0,p.w5)()||t.includes("mock")){let e=await p.xo.retrieveSession(t);return c.NextResponse.json({...e,mode:"mock"})}if(!n._4)throw Error("Stripe not configured");let s=await n._4.checkout.sessions.retrieve(t,{expand:["subscription","customer"]});if("paid"!==s.payment_status)return c.NextResponse.json({error:"Payment not completed"},{status:400});return c.NextResponse.json({id:s.id,payment_status:s.payment_status,customer:s.customer,subscription:s.subscription,metadata:s.metadata,mode:"live"})}catch(e){return console.error("Session verification error:",e),c.NextResponse.json({error:"Failed to verify session",details:e.message},{status:500})}}let d=new i.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/checkout/verify/route",pathname:"/api/checkout/verify",filename:"route",bundlePath:"app/api/checkout/verify/route"},resolvedPagePath:"/home/w3bsuki/MCP-RAG-V4/mcp-rag-dev-system/projects/project4/src/app/api/checkout/verify/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:l,workUnitAsyncStorage:m,serverHooks:_}=d;function v(){return(0,a.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:m})}},96487:()=>{},78335:()=>{},2864:(e,r,t)=>{"use strict";t.d(r,{w5:()=>i,xo:()=>s});class s{static createCheckoutSession(e){let r=process.env.NEXT_PUBLIC_APP_URL||"http://localhost:3003";return Promise.resolve({id:"cs_mock_"+Date.now(),url:`${r}/checkout/success?session_id=cs_mock_demo`,payment_status:"unpaid",mode:"subscription"})}static retrieveSession(e){return Promise.resolve({id:e,payment_status:"paid",customer:"cus_mock_"+Date.now(),subscription:"sub_mock_"+Date.now(),mode:"subscription",metadata:{tier:e.includes("pro")?"PRO":"TEAM"}})}static createPortalSession(e){return Promise.resolve({url:`${process.env.NEXT_PUBLIC_APP_URL}/account?demo=portal`})}static retrieveSubscription(e){return Promise.resolve({id:e,status:"active",current_period_end:Math.floor(Date.now()/1e3)+2592e3,items:{data:[{price:{id:"price_mock_pro",unit_amount:1999,recurring:{interval:"month"}}}]}})}}function i(){return!!(process.env.STRIPE_SECRET_KEY&&process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY)}},98481:(e,r,t)=>{"use strict";t.d(r,{_4:()=>i,z$:()=>o});var s=t(9657);t(9248);let i=process.env.STRIPE_SECRET_KEY?new s.A(process.env.STRIPE_SECRET_KEY,{apiVersion:"2025-05-28.basil",typescript:!0}):null,o={FREE:{name:"Free Forever",price:0,priceId:null,features:["100 price checks/day","Basic charts","5 portfolio items","Community support"],limits:{predictionsPerDay:100,portfolioItems:5,chartTimeframes:["24h","7d"],apiCalls:100}},PRO:{name:"Pro",price:1999,priceId:process.env.STRIPE_PRO_PRICE_ID||"price_pro_placeholder",features:["Unlimited AI predictions","All AI features","Unlimited portfolio","Priority support","Advanced charts","Real-time alerts"],limits:{predictionsPerDay:-1,portfolioItems:-1,chartTimeframes:["24h","7d","30d","90d","1y"],apiCalls:-1}},TEAM:{name:"Team",price:4999,priceId:process.env.STRIPE_TEAM_PRICE_ID||"price_team_placeholder",features:["5 user accounts","Shared portfolios","API access","Custom alerts","White-label options","Dedicated support"],limits:{predictionsPerDay:-1,portfolioItems:-1,chartTimeframes:["24h","7d","30d","90d","1y"],apiCalls:-1,teamMembers:5}}}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[638,452,645,184],()=>t(28882));module.exports=s})();